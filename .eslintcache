[{"/home/henrique/Documents/exception/src/index.js":"1","/home/henrique/Documents/exception/src/components/Login.js":"2","/home/henrique/Documents/exception/src/components/Auth.js":"3","/home/henrique/Documents/exception/src/components/Home.js":"4","/home/henrique/Documents/exception/src/components/MapContainer.js":"5","/home/henrique/Documents/exception/src/components/firestore.js":"6","/home/henrique/Documents/exception/src/components/Recomendacao.js":"7"},{"size":563,"mtime":1608670628851,"results":"8","hashOfConfig":"9"},{"size":5301,"mtime":1609818172158,"results":"10","hashOfConfig":"9"},{"size":594,"mtime":1606990324326,"results":"11","hashOfConfig":"9"},{"size":7275,"mtime":1609872740460,"results":"12","hashOfConfig":"9"},{"size":8880,"mtime":1609872717999,"results":"13","hashOfConfig":"9"},{"size":499,"mtime":1608510487842,"results":"14","hashOfConfig":"9"},{"size":12314,"mtime":1609874972449,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"1keae7i",{"filePath":"19","messages":"20","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"18"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26","usedDeprecatedRules":"18"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":1,"source":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"18"},"/home/henrique/Documents/exception/src/index.js",[],["35","36"],"/home/henrique/Documents/exception/src/components/Login.js",["37","38","39","40","41","42","43"],"import \"/home/henrique/Documents/exception/src/layouts/Login.css\";\nimport React, {Component} from 'react';\nimport Authentication from './Auth';\nimport $ from 'jquery';\nimport Swal from 'sweetalert2';\n\n\nexport default class extends Component{\n    \n\n    constructor(){\n        super();\n        \n        this.state = {\n          email: \"\",\n          password:\"\"\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleLogin =  this.handleLogin.bind(this);\n        this.handleSignUp = this.handleSignUp.bind(this);\n        this.escolha = this.escolha.bind(this);\n    }\n\n    escolha(controle){\n        if(controle === 0){\n            $(\".login_botoes_cadastro\").css(\"color\", \"#410A78\");\n            $(\".login_botoes_cadastro\").css(\"background-color\", \"white\");\n            $(\".login_botoes_login\").css(\"color\", \"white\");\n            $(\".login_botoes_login\").css(\"background-color\", \"#410A78\");\n            $(\".cadastro_button\").show();\n            $(\".login_button\").hide();\n        }\n        else if(controle === 1){\n            $(\".login_botoes_login\").css(\"color\", \"#410A78\");\n            $(\".login_botoes_login\").css(\"background-color\", \"white\");\n            $(\".login_botoes_cadastro\").css(\"color\", \"white\");\n            $(\".login_botoes_cadastro\").css(\"background-color\", \"#410A78\");\n            $(\".login_button\").show();\n            $(\".cadastro_button\").hide();\n        }\n    }\n    \n\n\n    handleChange = (e) =>{this.setState({value: e.target.value})}\n\n    handleLogin(){\n        Authentication.auth().signInWithEmailAndPassword(this.state.email, this.state.password).then((user) => {\n            this.props.history.push(\"/home\");\n        }).catch((err) =>{\n            switch(err.code){\n                case \"auth/invalid-email\":\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Email inválido',\n                        text: 'O email digitado está incorreto!'\n                      })\n                case \"auth/user-disabled\":\n                case \"auth/user-not-found\":\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Usuário não encontrado!',\n                        text: 'O usuário não foi encontrado, talvez você não tenha se cadastrado ainda em nosso sistema?'\n                      })\n                case \"auth/wrong_password\":\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Email ou senha incorretos',\n                        text: 'Digite novamente suas informações!'\n                      })\n            }\n        })\n    }\n\n    handleSignUp(){\n        Authentication.auth().createUserWithEmailAndPassword(this.state.email, this.state.password).then((user) => {\n            Swal.fire({\n                icon: 'success',\n                title: 'Usuário Cadastrado!!!',\n                text: 'Seja bem vindo a nossa plataforma',\n                confirmButtonText: 'Avançar',\n                confirmButtonColor: '#410A78'\n              }).then(() => {\n                this.props.history.push(\"/\");\n                this.handleLogin();\n\n              })\n            }).catch((err) =>{\n            switch(err.code){\n                case \"auth/email-already-in-use\":\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'O email escolhido já está em uso!',\n                        text: 'Tente se conectar a nossa plataforma por um outro email'\n                      })\n                case \"auth/invalid-email\":\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Email inválido!',\n                        text: 'Por favor, utilize um email válido para que possamos concluir seu cadastro'\n                      })\n                case \"auth/weak_password\":\n            }\n        })\n    }\n\n\n    componentDidMount(){\n        localStorage.setItem('preferencias', \"ambos\");\n        localStorage.setItem(\"coord_res_lat\", 0);\n        localStorage.setItem(\"coord_res_lng\", 0);\n        localStorage.setItem(\"controlador_rec\", 0);\n        console.log(localStorage.getItem('preferencias'))\n    }\n\n\n    render(){\n        return(\n            <div className=\"container_all_login\">\n                <div className=\"container_box_login\">\n                    <div className=\"login_botoes\">\n                        <button className=\"login_botoes_cadastro\" onClick={() => this.escolha(0)}>Cadastro</button>\n                        <button className=\"login_botoes_login\" onClick={() => this.escolha(1)}>Login</button>\n                    </div>\n                    <div className=\"container_login_info\">\n                        <h1>Email</h1>\n                        <input type=\"text\" onChange={(e) => {this.setState({email: e.target.value })}}/>\n                        <h1>Senha</h1>\n                        <input type=\"password\" onChange={(e) => {this.setState({password: e.target.value })}}/>\n                    </div>\n                    <button className=\"login_button\" onClick={() => this.handleLogin()}>Login</button>\n                    <button className=\"cadastro_button\" onClick={() => this.handleSignUp()}>Sign Up</button>\n                </div>\n            </div>\n        );\n    }\n}","/home/henrique/Documents/exception/src/components/Auth.js",[],"/home/henrique/Documents/exception/src/components/Home.js",["44","45","46","47","48","49","50","51"],"import React, {Component} from 'react';\nimport \"../layouts/Home.css\";\nimport MapContainer  from \"./MapContainer\";\nimport firebase from \"firebase/app\";\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Autocomplete from 'react-autocomplete';\n\n\nexport default class Home extends Component{\n\n    constructor(){\n        super();\n        \n        this.state = {\n            value: \"\",\n            nomes: [],\n            restaurantes: {}\n        };\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange = (e) =>{this.setState({value: e.target.value})}\n\n    componentDidMount(){\n        $(\"body\").css(\"overflow\", \"hidden\");\n        firebase.auth().onAuthStateChanged((user) => {\n            if (user) {\n\n            } else {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Nenhum usuário conectado!!!',\n                    text:  'Você será redirecionado a página de login',\n                }).then(\n                    this.props.history.push(\"/\")\n                  );\n            }\n        })\n        var list= {};\n        var ad= [];\n        if(localStorage.getItem(\"preferencias\") == \"lactose\"){\n            firebase.firestore().collection(\"Restaurantes\").where(\"LactoseFO\", \"==\", true).get().then((querySnapshot) => {\n                querySnapshot.forEach((doc) => {\n                    // doc.data() is never undefined for query doc snapshots\n                    {\n                        list[doc.data().Nome]= doc.data();\n                        ad.push({label: doc.data().Nome});\n                    }\n                });\n            this.setState({nomes: ad});\n            this.setState({restaurantes: list});\n            })}\n            else{\n                if(localStorage.getItem(\"preferencias\") == \"gluten\"){\n                    firebase.firestore().collection(\"Restaurantes\").where(\"GlutenFO\", \"==\", true).get().then((querySnapshot) => {\n                        querySnapshot.forEach((doc) => {\n                            list[doc.data().Nome]= doc.data();\n                            ad.push({label: doc.data().Nome});\n                        });\n                    this.setState({nomes: ad});\n                    this.setState({restaurantes: list});\n                    })}\n                else{\n                    if(localStorage.getItem(\"preferencias\") == \"ambos\"){\n                        firebase.firestore().collection(\"Restaurantes\").where(\"Id\", \">=\", 0).get().then((querySnapshot) => {\n                            querySnapshot.forEach((doc) => {\n                                list[doc.data().Nome]= doc.data();\n                                ad.push({label: doc.data().Nome});\n                            });\n                        this.setState({nomes: ad});\n                        this.setState({restaurantes: list});\n                        })}\n                }\n            }\n    }\n\n    render(){\n        return(\n            <div className=\"container_all_homepage\">\n                <div className=\"container_menu_homepage\">\n                    <div className=\"Botoes_menu\">\n                        <button onClick={() => {window.location.reload()}}>Home</button>\n                        <button onClick={() =>{\n                             Swal.fire({\n                                icon: 'info',\n                                title: 'Quer saber um lugar que tenha opções de alimentação para alérgicos a:',\n                                input: 'select',\n                                inputOptions: {\n                                    'Alergias':{\n                                        lactose: 'Lactose',\n                                        gluten: 'Glúten',\n                                        ambos: 'Nenhuma das opções'\n                                    }\n                                },\n                                inputPlaceholder: 'Selecione uma alergia',\n                                showCancelButton: true,\n                              }).then((resposta) =>{\n                                  console.log(resposta);\n                                  if(resposta.value == \"lactose\"){\n                                      console.log(\"entrou lactose\");\n                                      localStorage.setItem(\"preferencias\", resposta.value);\n                                      window.location.reload();\n                                  }\n                                  else{\n                                      if(resposta.value == \"gluten\"){\n                                          console.log(\"entrou gluten\");\n                                          localStorage.setItem(\"preferencias\", resposta.value);\n                                          window.location.reload();\n                                      }\n                                      else{\n                                          if(resposta.value == \"ambos\"){\n                                              console.log(\"entrou ambos\");\n                                              localStorage.setItem(\"preferencias\", resposta.value);\n                                              window.location.reload();\n                                          }\n                                      }\n                                  }\n                              })\n                        }}>Preferências</button>\n                        <button onClick={() => {this.props.history.push(\"/recomendacao\")}}>Recomendações</button>\n                    </div>\n                    <button onClick={() => {firebase.auth().signOut().then(() => {\n                        this.props.history.push(\"/\");\n                        }).catch((error) => {\n                            Swal.fire({\n                                icon: 'error',\n                                title: 'Ocorreu algum erro!'\n                              })\n                        })}}>Sair</button>\n                </div>\n                <div className=\"searchbar\">\n                    <Autocomplete\n                        getItemValue={(item) => item.label}\n                        items={this.state.nomes}\n                        shouldItemRender={(item, value) => item.label.toLowerCase().indexOf(value.toLowerCase()) > -1}\n                            getItemValue={item => item.label}\n                            renderItem={(item, highlighted) =>\n                            <div\n                                key={item.id}\n                                style={{ backgroundColor: highlighted ? '#eee' : 'transparent'}}\n                            >\n                                {item.label}\n                            </div>\n                        }\n                        value={this.state.value}\n                        onChange={(e) => this.setState({value: e.target.value})}\n                        onSelect={(value) => {\n                            this.setState({value: value});\n                            localStorage.setItem(\"busca\", value);\n                            console.log(value);\n                        }}\n                    />\n                </div>\n                <div className=\"container_map_homepage\">\n                    <MapContainer/>                    \n                </div>\n            </div>\n        )\n    }\n}","/home/henrique/Documents/exception/src/components/MapContainer.js",["52","53","54","55","56","57","58","59","60","61","62","63","64"],"import React, {Component} from 'react';\nimport { Map, GoogleApiWrapper, Marker, InfoWindow} from 'google-maps-react';\nimport firebase from './firestore';\nimport Swal from 'sweetalert2';\nimport { error } from 'jquery';\n\n\n\nexport class MapContainer extends Component {\n  constructor(){\n    \n    super();\n    \n    this.state = {\n      lat: '',\n      lng: '',\n      rest: [],\n      lat: [],\n      lng: [],\n      pos: [],\n      nota:{},\n      zoom: 15,\n      activeMarker: {},\n      selectedPlace: {},\n      showingInfoWindow: false\n    };\n    this.displayMarkers= this.displayMarkers.bind(this);\n    this.onMarkerClick= this.onMarkerClick.bind(this);\n    this.onInfoWindowClose= this.onInfoWindowClose.bind(this);\n    this.onMapClicked= this.onMapClicked.bind(this);\n    this.centralizar= this.centralizar.bind(this);\n  }\n\n\n\n\n  onMarkerClick = (props, marker) =>\n  this.setState({\n    activeMarker: marker,\n    selectedPlace: props,\n    showingInfoWindow: true\n  });\n\n  onInfoWindowClose = () =>\n  this.setState({\n    activeMarker: null,\n    showingInfoWindow: false\n  });\n\n  onMapClicked = () => {\n  if (this.state.showingInfoWindow)\n    this.setState({\n      activeMarker: null,\n      showingInfoWindow: false\n    });\n};\n\n  displayMarkers = () => {\n    return this.state.pos.map((posit, index) => {\n      if(this.state.rest[index].Tipo == \"Restaurante\"){\n      return <Marker key={index} id={index} position={posit} icon={\"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\"} title={this.state.rest[index].Nome} onClick={() => {\n        console.log(\"foi clicado\");\n        Swal.fire({\n          title: \"Classifique \"+ this.state.rest[index].Nome+ \"?\",\n          icon: \"question\",\n          input: 'range',\n          inputAttributes: {\n            min: 1,\n            max: 5,\n            step: 1\n          },\n          inputValue: 3,\n          cancelButtonText: 'Classificar',\n          cancelButtonColor: '#4CAF50',\n        }).then((result) => {\n          var aval= Number(result.value);\n          if(aval > 0 && aval < 6){\n            if(this.state.nota == {}){\n              var single= this.state.nota;\n              single[this.state.rest[index].Id]= aval;\n              this.setState({Nota: single});\n              firebase.firestore().collection(\"Users\").doc(firebase.auth().currentUser.uid).set({\n                Notas: this.state.nota\n              })\n            }\n            else{\n              var single= this.state.nota;\n              single[this.state.rest[index].Id] = aval;\n              this.setState({nota: single});\n              firebase.firestore().collection(\"Users\").doc(firebase.auth().currentUser.uid).set({\n                Notas: this.state.nota\n              })\n            }\n          }\n        })\n        \n      }}\n      \n      >\n          \n          <InfoWindow marker={this.state.activeMarker} onClose={this.onInfoWindowClose} visible={this.state.showingInfoWindow}>\n            <div>\n              <h1>{this.state.rest[index].Nome}</h1>\n            </div>\n          </InfoWindow>\n        </Marker>\n    }\n    else{\n      return <Marker key={index} id={index} position={posit} icon={\"http://maps.google.com/mapfiles/ms/icons/purple-dot.png\"} title={this.state.rest[index].Nome} onClick={() => {\n        console.log(\"foi clicado\");\n        Swal.fire({\n          title: \"Classifique \"+ this.state.rest[index].Nome+ \"?\",\n          icon: \"question\",\n          input: 'range',\n          inputAttributes: {\n            min: 1,\n            max: 5,\n            step: 1\n          },\n          inputValue: 3,\n          cancelButtonText: 'Classificar',\n          cancelButtonColor: '#4CAF50',\n        }).then((result) => {\n          var aval= Number(result.value);\n          if(aval > 0 && aval < 6){\n            if(this.state.nota == {}){\n              var single= this.state.nota;\n              single[this.state.rest[index].Id]= aval;\n              this.setState({Nota: single});\n              firebase.firestore().collection(\"Users\").doc(firebase.auth().currentUser.uid).set({\n                Notas: this.state.nota\n              })\n            }\n            else{\n              var single= this.state.nota;\n              single[this.state.rest[index].Id] = aval;\n              this.setState({nota: single});\n              firebase.firestore().collection(\"Users\").doc(firebase.auth().currentUser.uid).set({\n                Notas: this.state.nota\n              })\n            }\n          }\n        })\n      }}>\n          \n          <InfoWindow position={posit} marker={this.state.activeMarker} onClose={this.onInfoWindowClose} visible={this.state.showingInfoWindow}>\n            <div>\n              <h1>{this.state.rest[index].Nome}</h1>\n            </div>\n          </InfoWindow>\n        </Marker>\n    }\n  })\n  }\n\n  centralizar = () => {\n    var options = {\n      enableHighAccuracy: true,\n      timeout: 5000\n    };\n    this.setState({zoom: 15});\n    if(localStorage.getItem(\"controlador_rec\") == 1){\n      this.setState({lat: localStorage.getItem(\"coord_res_lat\")});\n      this.setState({lng: localStorage.getItem(\"coord_res_lng\")});\n      localStorage.setItem(\"controlador_rec\", 0);\n      this.setState({zoom: 18});\n    }\n    else{\n      if(localStorage.getItem(\"controlador_rec\") == 0){\n        navigator.geolocation.getCurrentPosition((position) => {\n          this.setState({lat: position.coords.latitude});\n          this.setState({lng: position.coords.longitude});\n          console.log(position);\n        }, error, options);\n      }\n      else{\n        console.log(\"entrou\");\n        localStorage.setItem(\"controlador_rec\", 0);\n      }\n    }\n  }\n\n\n  componentDidMount(){\n    window.addEventListener(\"storage\",(() => {\n      console.log(localStorage.getItem(\"busca\"));\n    }).bind(this));\n    this.centralizar();\n    console.log(localStorage.getItem('preferencias'));\n    if(localStorage.getItem('preferencias') == \"lactose\"){\n    firebase.firestore().collection(\"Restaurantes\").where(\"LactoseFO\" , \"==\", true).get()\n    .then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      this.setState({ rest: data });\n      var positions= [];\n      for(var i=0; i<data.length; i++){\n        var myLatlng = {lat:data[i].Latitude , lng:data[i].Longitude};\n        positions.push(myLatlng);\n      }\n      this.setState({ pos: positions});\n      firebase.firestore().collection(\"Users\").doc(firebase.auth().currentUser.uid).get().then((dados) =>{\n        if(dados.exists){\n          this.setState({nota: dados.data().Notas});\n        }\n        else{\n          this.setState({nota: {} });\n        }\n      })\n      \n    });\n  }\n  else{\n    if(localStorage.getItem('preferencias') == \"gluten\"){\n      firebase.firestore().collection(\"Restaurantes\").where(\"GlutenFO\" , \"==\", true)\n      .get()\n      .then(querySnapshot => {\n        const data = querySnapshot.docs.map(doc => doc.data());\n        this.setState({ rest: data });\n        var positions= [];\n        for(var i=0; i<data.length; i++){\n          var myLatlng = {lat:data[i].Latitude , lng:data[i].Longitude};\n          positions.push(myLatlng);\n        }\n        this.setState({ pos: positions});\n        firebase.firestore().collection(\"Users\").doc(firebase.auth().currentUser.uid).get().then((dados) =>{\n          if(dados.exists){\n            this.setState({nota: dados.data().Notas});\n          }\n          else{\n            this.setState({nota: {} });\n          }\n        })\n        \n      });\n    }\n    else{\n      if(localStorage.getItem('preferencias') == \"ambos\"){\n        firebase.firestore().collection(\"Restaurantes\").where(\"Id\" , \">=\", 0)\n        .get()\n        .then(querySnapshot => {\n          const data = querySnapshot.docs.map(doc => doc.data());\n          this.setState({ rest: data });\n          var positions= [];\n          for(var i=0; i<data.length; i++){\n            var myLatlng = {lat:data[i].Latitude , lng:data[i].Longitude};\n            positions.push(myLatlng);\n          }\n          this.setState({ pos: positions});\n          firebase.firestore().collection(\"Users\").doc(firebase.auth().currentUser.uid).get().then((dados) =>{\n            if(dados.exists){\n              this.setState({nota: dados.data().Notas});\n            }\n            else{\n              this.setState({nota: {} });\n            }\n          })\n          \n        });\n      }\n    }\n  } \n  }\n\n  render() {\n    const styleMap= {\n      width: \"100%\",\n      height: \"92%\",\n    };\n    const position= { lat: this.state.lat, lng: this.state.lng };\n    const zoom= this.state.zoom;\n    return (\n      <Map\n        google={this.props.google}\n        zoom={zoom}\n        style={styleMap}\n        onClick={this.onMapClicked}\n        initialCenter={position}\n        center={position}\n      >\n      {this.displayMarkers()}\n      </Map>\n\n    );\n  }\n}\n\nexport default GoogleApiWrapper(\n  (props) => ({\n    apiKey: 'AIzaSyC_3wQ-jMGOLXB_DJxQiJHmD-hZCLOD3_g',\n  }\n))(MapContainer)","/home/henrique/Documents/exception/src/components/firestore.js",[],"/home/henrique/Documents/exception/src/components/Recomendacao.js",["65","66","67","68","69","70","71","72","73","74","75","76","77","78"],"import React, {Component} from 'react';\nimport \"../layouts/Recomendacao.css\";\nimport firebase from './firestore';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\n\n\n\n\nexport default class Recomendacao extends Component{\n\n    constructor(){\n        super();\n\n        this.state = {\n            avaliacoes:{},\n            ranking: [],\n            usuarios: 0,\n            recomendar: {},\n            rankitems: [],\n            hora: ''\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.pearson= this.pearson.bind(this);\n        this.rank= this.rank.bind(this);\n        this.recomendador= this.recomendador.bind(this);\n        this.botao_centralizar= this.botao_centralizar.bind(this);\n    }\n\n\n    handleChange = (e) =>{this.setState({value: e.target.value})}\n\n\n    pearson(dataset, p1, p2){\n        var existp1p2 = {};\n        for(item in dataset[p1]){\n            if(item in dataset[p2]){\n                existp1p2[item] = 1\n            }\n        }\n        var num_existence = Object.getOwnPropertyNames(existp1p2).length;\n        console.log(num_existence);\n        if(num_existence == 0){ \n            return 0;\n        }\n        var p1_sum=0,\n            p2_sum=0,\n            p1_sq_sum=0,\n            p2_sq_sum=0,\n            prod_p1p2 = 0;\n        for(var item in existp1p2){\n            p1_sum += dataset[p1][item];\n            p2_sum += dataset[p2][item];\n            p1_sq_sum += Math.pow(dataset[p1][item],2);\n            p2_sq_sum += Math.pow(dataset[p2][item],2);\n            prod_p1p2 += dataset[p1][item]*dataset[p2][item];\n        }\n        console.log(p1_sum);\n        console.log(p2_sum);\n        console.log(p1_sq_sum);\n        console.log(p2_sq_sum);\n        console.log(prod_p1p2);\n        var numerator =prod_p1p2 - (p1_sum*p2_sum/num_existence);\n        var st1 = p1_sq_sum - Math.pow(p1_sum,2)/num_existence;\n        var st2 = p2_sq_sum -Math.pow(p2_sum,2)/num_existence;\n        var denominator = Math.sqrt(st1*st2);\n        console.log(numerator);\n        console.log(st1);\n        console.log(st2);\n        console.log(denominator);\n        if(denominator ==0) return 0;\n        else {\n            var val = numerator / denominator;\n            return val;\n        }\n\n\n    }\n\n    rank(dataset,pessoa,users){\n        var scores=[];\n        for(var others in dataset){\n            if(others != pessoa){\n                var val = this.pearson(this.state.avaliacoes,pessoa,others);\n                var p = others;\n                scores.push({val:val,p:p});\n            }\n        }\n        console.log(scores);\n        scores.sort(function(a,b){\n            return b.val < a.val ? -1 : b.val > a.val ? 1 : b.val >= a.val ? 0 : NaN;\n        });\n        var score=[];\n        for(var i =0;i<users;i++){\n            score.push(scores[i]);\n        }\n        this.setState({ranking: score});\n    }\n\n    recomendador(dataset, person){\n        var totals = {\n            setDefault:function(props,value){\n                if(!this[props]){\n                    this[props] =0;\n                }\n                this[props] += value;\n            }\n        },\n        simsum = {\n            setDefault:function(props,value){\n                if(!this[props]){\n                    this[props] =0;\n                }\n                this[props] += value;\n            }\n        },\n        rank_lst =[];\n        for(var other in dataset){\n        if(other ===person) continue;\n        var similar = this.pearson(dataset,person,other);\n        if(similar <=0) continue;\n        for(var item in dataset[other]){\n            if(!(item in dataset[person]) ||(dataset[person][item]==0)){\n                //the setter help to make this look nice.\n                /*if(this.state.hora >= 11 && this.state.hora<=14  && this.state.avaliacoes){\n                    similar= similar * 0.8;\n                }\n                else{\n                    if(this.state.hora >14 && this.state.hora <= 19){\n                    \n                    }\n                }*/\n                console.log(this.state.avaliacoes[person][item]);\n                console.log(similar);\n                totals.setDefault(item,dataset[other][item]*similar);\n                simsum.setDefault(item,similar);                        \n            }\n        }\n        }\n        for(var item in totals){\n        //this what the setter function does\n        //so we have to find a way to avoid the function in the object    \n            if(typeof totals[item] !=\"function\"){\n                var val = totals[item] / simsum[item];\n                rank_lst.push({val:val,items:item});\n           }\n        }\n        rank_lst.sort(function(a,b){\n            return b.val < a.val ? -1 : b.val > a.val ? 1 : b.val >= a.val ? 0 : NaN;\n        });\n        var recommend = []; \n        for(var i in rank_lst){\n            recommend.push(rank_lst[i].items);\n        }\n        console.log([rank_lst,recommend]);\n        console.log(rank_lst);\n        console.log(recommend);\n        this.setState({rankitems: recommend})\n        var list= {};\n        if(localStorage.getItem(\"preferencias\") == \"lactose\"){\n        firebase.firestore().collection(\"Restaurantes\").where(\"LactoseFO\", \"==\", true).get().then((querySnapshot) => {\n            querySnapshot.forEach((doc) => {\n                // doc.data() is never undefined for query doc snapshots\n                var verify=String(doc.data().Id);\n                if(recommend.includes(verify)){\n                    list[doc.data().Id]= doc.data();\n                }\n            });\n        this.setState({recomendar: list});\n        })}\n        else{\n            if(localStorage.getItem(\"preferencias\") == \"gluten\"){\n                firebase.firestore().collection(\"Restaurantes\").where(\"GlutenFO\", \"==\", true).get().then((querySnapshot) => {\n                    querySnapshot.forEach((doc) => {\n                        // doc.data() is never undefined for query doc snapshots\n                        var verify=String(doc.data().Id);\n                        if(recommend.includes(verify)){\n                            list[doc.data().Id]= doc.data();\n                        }\n                    });\n                this.setState({recomendar: list});\n                })}\n            else{\n                if(localStorage.getItem(\"preferencias\") == \"ambos\"){\n                    firebase.firestore().collection(\"Restaurantes\").where(\"Id\", \">=\", 0).get().then((querySnapshot) => {\n                        querySnapshot.forEach((doc) => {\n                            // doc.data() is never undefined for query doc snapshots\n                            var verify=String(doc.data().Id);\n                            if(recommend.includes(verify)){\n                                list[doc.data().Id]= doc.data();\n                            }\n                        });\n                    this.setState({recomendar: list});\n                    })}\n            }\n        }\n    }\n\n    botao_centralizar(latitude, longitude){     //função pra setar as coordenadas do setcenter do maps\n        localStorage.setItem(\"coord_res_lat\", latitude);\n        localStorage.setItem(\"coord_res_lng\", longitude);\n        localStorage.setItem(\"controlador_rec\", 1);\n        console.log(localStorage.getItem(\"coord_res_lat\"));\n        console.log(localStorage.getItem(\"coord_res_lng\"));\n        console.log(localStorage.getItem(\"controlador_rec\"));\n        this.props.history.push(\"/home\");\n    }\n\n    componentDidMount(){\n        $(\"body\").css(\"overflow-y\", \"scroll\");\n        $(\".container_all_homepage\").css(\"height\",\"auto\");\n        firebase.auth().onAuthStateChanged((user) => {\n            if (user) {\n\n            } else {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Nenhum usuário conectado!!!',\n                    text:  'Você será redirecionado a página de login',\n                }).then(\n                    this.props.history.push(\"/\")\n                  );\n            }\n        });\n        var lista={};\n        this.setState({usuarios: 0});\n        firebase.firestore().collection(\"Users\").get().then((querySnapshot) => {\n            querySnapshot.forEach((doc) => {\n                // doc.data() is never undefined for query doc snapshots\n                lista[doc.id]=doc.data().Notas;\n                this.setState({usuarios: this.state.usuarios+1});\n            });\n            this.setState({avaliacoes: lista})\n            var date= new Date();\n            this.setState({hora: date.getHours()});\n            this.rank(this.state.avaliacoes, firebase.auth().currentUser.uid, this.state.usuarios-1);\n            this.recomendador(this.state.avaliacoes, firebase.auth().currentUser.uid);\n            console.log(this.state.recomendar);\n        });\n    }\n\n    render(){\n        return(\n            <div className=\"container_all_homepage\">\n                <div className=\"container_menu_homepage\">\n                    <div className=\"Botoes_menu\">\n                        <button onClick={() => {this.props.history.push(\"/home\")}}>Home</button>\n                        <button onClick={() =>{\n                             Swal.fire({\n                                icon: 'info',\n                                title: 'Quer saber um lugar que tenha opções de alimentação para alérgicos a:',\n                                input: 'select',\n                                inputOptions: {\n                                    'Alergias':{\n                                        lactose: 'Lactose',\n                                        gluten: 'Glúten',\n                                        ambos: 'Ambos'\n                                    }\n                                },\n                                inputPlaceholder: 'Selecione uma alergia',\n                                showCancelButton: true,\n                              }).then((resposta) =>{\n                                  console.log(resposta);\n                                  if(resposta.value == \"lactose\"){\n                                      console.log(\"entrou lactose\");\n                                      localStorage.setItem(\"preferencias\", resposta.value);\n                                      window.location.reload();\n                                  }\n                                  else{\n                                      if(resposta.value == \"gluten\"){\n                                          console.log(\"entrou gluten\");\n                                          localStorage.setItem(\"preferencias\", resposta.value);\n                                          window.location.reload();\n                                      }\n                                      else{\n                                          if(resposta.value == \"ambos\"){\n                                              console.log(\"entrou ambos\");\n                                              localStorage.setItem(\"preferencias\", resposta.value);\n                                              window.location.reload();\n                                          }\n                                      }\n                                  }\n                              })\n                        }}>Preferências</button>\n                        <button onClick={() => {window.location.reload()}}>Recomendações</button>\n                    </div>\n                    <button onClick={() => {firebase.auth().signOut().then(() => {\n                        this.props.history.push(\"/\");\n                        }).catch((error) => {\n                            Swal.fire({\n                                icon: 'error',\n                                title: 'Ocorreu algum erro!'\n                              })\n                        })}}>Sair</button>\n                </div>\n                <div className=\"container_recomendacao\">\n                    {Object.values(Object.values(this.state.recomendar)).map((dado) => {\n                        console.log(dado);\n                        return <button className=\"card\" onClick={() => this.botao_centralizar(dado.Latitude, dado.Longitude)}>\n                            <h1>{dado.Nome}</h1>\n                            <p>{dado.Tipo}</p>\n                        </button>\n                        })\n                    }\n                </div>\n            </div>\n        )\n    }\n}",{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","severity":1,"message":"84","line":8,"column":1,"nodeType":"85","endLine":137,"endColumn":2},{"ruleId":"86","severity":1,"message":"87","line":51,"column":13,"nodeType":"88","messageId":"89","endLine":71,"endColumn":14},{"ruleId":"90","severity":1,"message":"91","line":58,"column":17,"nodeType":"92","messageId":"93","endLine":58,"endColumn":43},{"ruleId":"90","severity":1,"message":"91","line":65,"column":17,"nodeType":"92","messageId":"93","endLine":70,"endColumn":25},{"ruleId":"86","severity":1,"message":"87","line":89,"column":13,"nodeType":"88","messageId":"89","endLine":103,"endColumn":14},{"ruleId":"90","severity":1,"message":"91","line":96,"column":17,"nodeType":"92","messageId":"93","endLine":101,"endColumn":25},{"ruleId":"90","severity":1,"message":"91","line":102,"column":17,"nodeType":"92","messageId":"93","endLine":102,"endColumn":43},{"ruleId":"94","severity":1,"message":"95","line":42,"column":49,"nodeType":"96","messageId":"97","endLine":42,"endColumn":51},{"ruleId":"98","severity":1,"message":"99","line":46,"column":21,"nodeType":"100","messageId":"101","endLine":49,"endColumn":22},{"ruleId":"94","severity":1,"message":"95","line":55,"column":57,"nodeType":"96","messageId":"97","endLine":55,"endColumn":59},{"ruleId":"94","severity":1,"message":"95","line":65,"column":61,"nodeType":"96","messageId":"97","endLine":65,"endColumn":63},{"ruleId":"94","severity":1,"message":"95","line":100,"column":53,"nodeType":"96","messageId":"97","endLine":100,"endColumn":55},{"ruleId":"94","severity":1,"message":"95","line":106,"column":57,"nodeType":"96","messageId":"97","endLine":106,"endColumn":59},{"ruleId":"94","severity":1,"message":"95","line":112,"column":61,"nodeType":"96","messageId":"97","endLine":112,"endColumn":63},{"ruleId":"102","severity":1,"message":"103","line":137,"column":29,"nodeType":"104","endLine":137,"endColumn":62},{"ruleId":"105","severity":1,"message":"106","line":18,"column":7,"nodeType":"107","messageId":"97","endLine":18,"endColumn":10},{"ruleId":"105","severity":1,"message":"108","line":19,"column":7,"nodeType":"107","messageId":"97","endLine":19,"endColumn":10},{"ruleId":"94","severity":1,"message":"95","line":60,"column":38,"nodeType":"96","messageId":"97","endLine":60,"endColumn":40},{"ruleId":"94","severity":1,"message":"95","line":78,"column":32,"nodeType":"96","messageId":"97","endLine":78,"endColumn":34},{"ruleId":"109","severity":1,"message":"110","line":87,"column":19,"nodeType":"111","messageId":"112","endLine":87,"endColumn":25},{"ruleId":"94","severity":1,"message":"95","line":126,"column":32,"nodeType":"96","messageId":"97","endLine":126,"endColumn":34},{"ruleId":"109","severity":1,"message":"110","line":135,"column":19,"nodeType":"111","messageId":"112","endLine":135,"endColumn":25},{"ruleId":"94","severity":1,"message":"95","line":162,"column":48,"nodeType":"96","messageId":"97","endLine":162,"endColumn":50},{"ruleId":"94","severity":1,"message":"95","line":169,"column":50,"nodeType":"96","messageId":"97","endLine":169,"endColumn":52},{"ruleId":"113","severity":1,"message":"114","line":187,"column":8,"nodeType":"115","messageId":"97","endLine":187,"endColumn":12,"fix":"116"},{"ruleId":"94","severity":1,"message":"95","line":190,"column":45,"nodeType":"96","messageId":"97","endLine":190,"endColumn":47},{"ruleId":"94","severity":1,"message":"95","line":213,"column":45,"nodeType":"96","messageId":"97","endLine":213,"endColumn":47},{"ruleId":"94","severity":1,"message":"95","line":237,"column":47,"nodeType":"96","messageId":"97","endLine":237,"endColumn":49},{"ruleId":"117","severity":1,"message":"118","line":36,"column":13,"nodeType":"111","messageId":"119","endLine":36,"endColumn":17},{"ruleId":"117","severity":1,"message":"118","line":37,"column":16,"nodeType":"111","messageId":"119","endLine":37,"endColumn":20},{"ruleId":"117","severity":1,"message":"118","line":38,"column":27,"nodeType":"111","messageId":"119","endLine":38,"endColumn":31},{"ruleId":"94","severity":1,"message":"95","line":43,"column":26,"nodeType":"96","messageId":"97","endLine":43,"endColumn":28},{"ruleId":"94","severity":1,"message":"95","line":71,"column":24,"nodeType":"96","messageId":"97","endLine":71,"endColumn":26},{"ruleId":"94","severity":1,"message":"120","line":83,"column":23,"nodeType":"96","messageId":"97","endLine":83,"endColumn":25},{"ruleId":"94","severity":1,"message":"95","line":123,"column":67,"nodeType":"96","messageId":"97","endLine":123,"endColumn":69},{"ruleId":"109","severity":1,"message":"121","line":140,"column":17,"nodeType":"111","messageId":"112","endLine":140,"endColumn":21},{"ruleId":"94","severity":1,"message":"95","line":160,"column":49,"nodeType":"96","messageId":"97","endLine":160,"endColumn":51},{"ruleId":"94","severity":1,"message":"95","line":172,"column":53,"nodeType":"96","messageId":"97","endLine":172,"endColumn":55},{"ruleId":"94","severity":1,"message":"95","line":184,"column":57,"nodeType":"96","messageId":"97","endLine":184,"endColumn":59},{"ruleId":"94","severity":1,"message":"95","line":264,"column":53,"nodeType":"96","messageId":"97","endLine":264,"endColumn":55},{"ruleId":"94","severity":1,"message":"95","line":270,"column":57,"nodeType":"96","messageId":"97","endLine":270,"endColumn":59},{"ruleId":"94","severity":1,"message":"95","line":276,"column":61,"nodeType":"96","messageId":"97","endLine":276,"endColumn":63},"no-native-reassign",["122"],"no-negated-in-lhs",["123"],"import/no-anonymous-default-export","Unexpected default export of anonymous class","ExportDefaultDeclaration","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","no-fallthrough","Expected a 'break' statement before 'case'.","SwitchCase","case","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-lone-blocks","Nested block is redundant.","BlockStatement","redundantNestedBlock","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","no-dupe-keys","Duplicate key 'lat'.","ObjectExpression","Duplicate key 'lng'.","no-redeclare","'single' is already defined.","Identifier","redeclared","no-extra-bind","The function binding is unnecessary.","CallExpression",{"range":"124","text":"125"},"no-use-before-define","'item' was used before it was defined.","usedBeforeDefined","Expected '!==' and instead saw '!='.","'item' is already defined.","no-global-assign","no-unsafe-negation",[5708,5719],""]